# TPBench设计文档

## 1 简介

TPBench (Throughputs Probability Benchmark)是一个用于并行计算的微内核吞吐量基准测试工具。它的主要用途是测试处理器的硬件性能，即执行基本计算、存储和通信指令时的指令吞吐量。它可以兼容多种指令集（例如x86-64、Armv8），多种处理器型号（例如Intel Xeon、HiSilicon KunPeng），多种处理器类型（例如CPU、GPU）和多种操作系统（例如Windows、Linux、Mac）。对于大多数具备通用计算功能的处理器，TPBench预置了“算、存、传”三种类型的多个基础测试程序（即“微内核”），并支持通过开发接口新增测试程序。TPBench会按照用户设置，重复运行微内核，并测量每次运行的吞吐量，测试完成后，输出吞吐量的分布情况。

与现有的处理器微架构测试工具相比，TPBench更侧重于科学计算、工程计算和人工智能计算程序中的共性计算内核，并在纳秒级时间尺度上评价处理器持续计算中的性能稳定性。使用TPBench，可以在数据量、缓存状态、寄存器种类、处理器频率和操作系统设置等多个维度进行变量控制，并观察上述变量改变时，微内核吞吐量分布的变化情况。基于上述设计目标，TPBench可以帮助对处理器结构和性能优化有较多经验的用户更全面地掌握处理器在不同负载下的性能特征，从而对处理器或应用程序进行细粒度的设计。

## 2 主要功能和特性

### 2.1 基于微内核的基准性能测试

### 2.2 基于统计分布的测试结果报告

### 2.3 纳秒级时钟精度和波动检测灵敏度

### 2.4 支持并行计算环境

### 2.5 支持异构处理器

### 2.6 易用的功能扩展接口

## 3 用户接口

## 4 开发接口

## 5 为关键功能服务的核心机制

## 6 参考文献

## 修改日志

## 2024/02/18

- 首次编辑
- 完成一级大纲
- 完成“1 简介”